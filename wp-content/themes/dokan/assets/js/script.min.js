jQuery(function(e){function r(){return window.innerWidth<600?2:window.innerWidth<900?3:4}function i(e,t,n){jQuery('<div class="chart-tooltip">'+n+"</div>").css({top:t-16,left:e+20}).appendTo("body").fadeIn(200)}e("ul.dropdown-menu li.dropdown").hover(function(){e(this).addClass("open")},function(){e(this).removeClass("open")});e(".datepicker").datepicker({dateFormat:"yy-mm-dd"});e(".tips").tooltip();var t=e("ul.dokan-dashboard-menu"),n=e("#content article");n.height()>t.height()&&t.css({height:n.height()});e(window).width()<767&&e("#cat-drop-stack li.has-children").on("click","a",function(t){t.preventDefault();e(this).siblings(".sub-category").slideToggle("fast")});e(".product-sliders").flexslider({animation:"slide",animationLoop:!1,itemWidth:190,itemMargin:10,controlNav:!1,minItems:r(),maxItems:r()});var s=null,o=null;jQuery(".chart-placeholder").bind("plothover",function(e,t,n){if(n){if(s!=n.dataIndex||o!=n.seriesIndex){s=n.dataIndex;o=n.seriesIndex;jQuery(".chart-tooltip").remove();if(n.series.points.show||n.series.enable_tooltip){var r=n.series.data[n.dataIndex][1];tooltip_content="";n.series.prepend_label&&(tooltip_content=tooltip_content+n.series.label+": ");n.series.prepend_tooltip&&(tooltip_content+=n.series.prepend_tooltip);tooltip_content+=r;n.series.append_tooltip&&(tooltip_content+=n.series.append_tooltip);n.series.pie.show?i(t.pageX,t.pageY,tooltip_content):i(n.pageX,n.pageY,tooltip_content)}}}else{jQuery(".chart-tooltip").remove();s=null}});e("body").on("added_to_cart",function(t,n){e("i.fa-shopping-cart").removeClass("fa-spin");e(".dokan-cart-amount-top > .amount").fadeOut("fast",function(){e(".dokan-cart-amount-top > .amount").html(n.amount).fadeIn("fast")})});e("body").on("adding_to_cart",function(t,n){e(n).children("i").addClass("fa-spin")})});(function(e){e.validator.setDefaults({ignore:":hidden"});var t=function(t,n){var r=e(n).closest(".form-group");r.addClass("has-error").append(t)},n=function(t,n){e(n).closest(".form-group").removeClass("has-error")},r={init:function(){var t=this;e("a.dokan-banner-drag").on("click",this.imageUpload);e("a.dokan-remove-banner-image").on("click",this.removeBanner);this.validateForm(t);return!1},imageUpload:function(){var t,n=e(this);if(t){t.open();return}t=wp.media.frames.file_frame=wp.media({title:jQuery(this).data("uploader_title"),button:{text:jQuery(this).data("uploader_button_text")},multiple:!1});t.on("select",function(){var r=t.state().get("selection").first().toJSON(),i=n.closest(".dokan-banner");i.find("input.dokan-file-field").val(r.id);i.find("img.dokan-banner-img").attr("src",r.url);e(".image-wrap",i).removeClass("dokan-hide");e(".button-area").addClass("dokan-hide")});t.open()},submitSettings:function(){var t=e("form#settings-form"),n=t.serialize()+"&action=dokan_settings";t.find(".ajax_prev").append('<span class="dokan-loading"> </span>');e.post(dokan.ajaxurl,n,function(n){t.find("span.dokan-loading").remove();e("html,body").animate({scrollTop:100});n.success?e(".dokan-ajax-response").html(e("<div/>",{"class":"alert alert-success",html:"<p>"+n.data+"</p>"})):e(".dokan-ajax-response").html(e("<div/>",{"class":"alert alert-danger",html:"<p>"+n.data+"</p>"}))})},validateForm:function(r){e("form#settings-form").validate({submitHandler:function(e){r.submitSettings()},errorElement:"span",errorClass:"error",errorPlacement:t,success:n})},removeBanner:function(t){t.preventDefault();var n=e(this),r=n.closest(".image-wrap"),i=r.siblings(".button-area");r.find("input.dokan-file-field").val("0");r.addClass("dokan-hide");i.removeClass("dokan-hide")}},i={init:function(){var e=this;this.withdrawValidate(e)},withdrawValidate:function(r){e("form.withdraw").validate({errorElement:"span",errorClass:"error",errorPlacement:t,success:n})}},s={init:function(){var e=this;this.couponsValidation(e)},couponsValidation:function(r){e("form.coupons").validate({errorElement:"span",errorClass:"error",errorPlacement:t,success:n})}},o={init:function(){this.validate(this)},validate:function(r){e("form#dokan-form-contact-seller").validate({errorPlacement:t,success:n,submitHandler:function(t){e(t).block({message:null,overlayCSS:{background:"#fff url("+dokan.ajax_loader+") no-repeat center",opacity:.6}});var n=e(t).serialize();e.post(dokan.ajaxurl,n,function(n){e(t).unblock();typeof n.data!="undefined"&&e(t).find(".ajax-response").html(n.data);e(t).find("input[type=text], input[type=email], textarea").val("").removeClass("valid")})}})}};e(function(){r.init();i.init();s.init();o.init()})})(jQuery);